<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Be My Valentine?</title>

<link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Nunito:wght@400;700;800&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:Nunito, sans-serif;
  background:linear-gradient(135deg,#ff5ea8,#ff2d55);
  color:#2a0b19;
  overflow-x:hidden;
}

/* Floating hearts */
.hearts{position:fixed;inset:0;pointer-events:none}
.heart{
  position:absolute;width:18px;height:18px;background:rgba(255,255,255,.6);
  transform:rotate(45deg);border-radius:4px;
  animation:floatUp linear infinite;
}
.heart:before,.heart:after{
  content:"";position:absolute;width:18px;height:18px;background:inherit;border-radius:50%;
}
.heart:before{left:-9px}
.heart:after{top:-9px}
@keyframes floatUp{
  from{transform:translateY(110vh) rotate(45deg);opacity:0}
  10%{opacity:.9}
  to{transform:translateY(-20vh) rotate(45deg);opacity:0}
}

.wrap{max-width:900px;margin:0 auto;padding:30px 16px}
.card{
  background:white;
  border-radius:24px;
  padding:20px;
  box-shadow:0 20px 60px rgba(0,0,0,.2);
}

.headline{
  font-family:Pacifico;
  font-size:40px;
  text-align:center;
  color:#d1004b;
}

.photo{
  width:280px;height:280px;margin:20px auto;
  border-radius:26px;overflow:hidden;
  box-shadow:0 15px 40px rgba(0,0,0,.2);
}
.photo img{width:100%;height:100%;object-fit:cover}

.actions{text-align:center;margin-top:20px;position:relative}
button{
  padding:12px 18px;border:none;border-radius:16px;
  font-weight:800;cursor:pointer;margin:6px;
}
.yes{background:#19c37d;color:white}
.no{background:#ffeef2;color:#b9002f;position:absolute}

.overlay{
  display:none;position:absolute;inset:0;
  background:linear-gradient(135deg,#ff5ea8,#ff2d55);
  border-radius:24px;
  align-items:center;justify-content:center;
}
.overlay.show{display:flex}

.overlayBox{
  background:white;
  padding:20px;
  border-radius:20px;
  text-align:center;
}

/* SVG Heart */
.bonusPhoto{
  width:320px;height:320px;margin:20px auto;
}
.bonusPhoto svg{width:100%;height:100%;display:block;
  filter:drop-shadow(0 25px 50px rgba(0,0,0,.3));
}

canvas{position:absolute;inset:0;pointer-events:none}
</style>
</head>

<body>

<div class="hearts" id="hearts"></div>

<div class="wrap">

<div class="card" id="builder">
<h2>Customize your Valentine üíù</h2>

<input id="mainUrl" placeholder="Main image URL (raw GitHub link)" style="width:100%;margin:8px 0;padding:10px;border-radius:12px;border:1px solid #ccc">
<input id="bonusUrl" placeholder="Bonus image URL (raw GitHub link)" style="width:100%;margin:8px 0;padding:10px;border-radius:12px;border:1px solid #ccc">

<textarea id="message" style="width:100%;margin:8px 0;padding:10px;border-radius:12px;border:1px solid #ccc;height:100px">
I love you so much. You make my life brighter every day. üíï
</textarea>

<button onclick="preview()">Preview</button>
<button onclick="copyLink()">Copy shareable link</button>
</div>

<div class="card" id="valentine" style="display:none;position:relative">
<canvas id="confetti"></canvas>

<div class="headline">Will you be my Valentine?</div>

<div class="photo" id="mainPhoto" style="display:none">
<img id="mainImg">
</div>

<p id="liveMsg" style="text-align:center"></p>

<div class="actions" id="btnArea">
<button class="yes" id="yesBtn">Yes üíñ</button>
<button class="no" id="noBtn">No üôà</button>
</div>

<div class="overlay" id="bonusScreen">
<div class="overlayBox">
<h2 style="font-family:Pacifico;color:#d1004b">Bonus level unlocked ‚ú®</h2>
<p>This is my favourite photo of us üíó</p>

<div class="bonusPhoto" id="bonusBox" style="display:none">
<svg viewBox="0 0 100 100">
<defs>
<clipPath id="heartClip">
<path d="M50 88
C20 66,6 48,6 31
C6 18,15 10,27 10
C36 10,44 15,50 23
C56 15,64 10,73 10
C85 10,94 18,94 31
C94 48,80 66,50 88 Z"/>
</clipPath>
</defs>
<image id="bonusImg"
href=""
x="0" y="0" width="100" height="100"
preserveAspectRatio="xMidYMid slice"
clip-path="url(#heartClip)">
</image>
</svg>
</div>

<button onclick="closeBonus()">Ok come cuddle üíñ</button>
</div>
</div>

</div>
</div>

<script>
const qs = s=>document.querySelector(s)

function makeHearts(){
  const container=qs("#hearts")
  for(let i=0;i<25;i++){
    const h=document.createElement("div")
    h.className="heart"
    h.style.left=Math.random()*100+"vw"
    h.style.animationDuration=(8+Math.random()*8)+"s"
    container.appendChild(h)
  }
}
makeHearts()

function preview(){
  const main=qs("#mainUrl").value.trim()
  const bonus=qs("#bonusUrl").value.trim()
  const msg=qs("#message").value.trim()

  const url=location.href.split("?")[0]
  const params=new URLSearchParams()
  params.set("m",msg)
  params.set("img",main)
  params.set("bonus",bonus)
  location.href=url+"?"+params.toString()
}

function copyLink(){
  const main=qs("#mainUrl").value.trim()
  const bonus=qs("#bonusUrl").value.trim()
  const msg=qs("#message").value.trim()

  const url=location.href.split("?")[0]
  const params=new URLSearchParams()
  params.set("m",msg)
  params.set("img",main)
  params.set("bonus",bonus)
  const link=url+"?"+params.toString()

  navigator.clipboard.writeText(link)
  alert("Copied!")
}

function startConfetti(canvas){
  const ctx=canvas.getContext("2d")
  canvas.width=canvas.offsetWidth
  canvas.height=canvas.offsetHeight
  for(let i=0;i<120;i++){
    ctx.fillStyle="white"
    ctx.fillRect(Math.random()*canvas.width,
                 Math.random()*canvas.height,
                 6,12)
  }
}

function closeBonus(){
  qs("#bonusScreen").classList.remove("show")
}

const params=new URLSearchParams(location.search)
if(params.get("m")){
  qs("#builder").style.display="none"
  qs("#valentine").style.display="block"

  qs("#liveMsg").textContent=params.get("m")

  const img=params.get("img")
  if(img){
    qs("#mainPhoto").style.display="block"
    qs("#mainImg").src=img
  }

  const bonus=params.get("bonus")
  if(bonus){
    qs("#bonusBox").style.display="block"
    qs("#bonusImg").setAttribute("href",bonus)
  }

  qs("#yesBtn").onclick=()=>{
    qs("#bonusScreen").classList.add("show")
    startConfetti(qs("#confetti"))
  }

  const noBtn=qs("#noBtn")
  const area=qs("#btnArea")
  noBtn.onmouseenter=()=>{
    noBtn.style.left=Math.random()*200+"px"
    noBtn.style.top=Math.random()*80+"px"
  }
}
</script>

</body>
</html>
